<!DOCTYPE html>
<html>

<head>
<!-- Standard Meta -->
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

<!-- Site Properties -->
<title>button</title>
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.3.3/semantic.min.css">
<link rel="stylesheet" type="text/css" href="color.css">
<script src="https://code.jquery.com/jquery-3.3.1.slim.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.3.3/semantic.min.js"></script>
<style>
 .button {margin-top: 0.25em!important;}
</style>
</head>
  
<script type="text/javascript">
    var data = [
        {"id": "ID001","title": "坊っちゃん","tags": ["literature1","literature2"],"is_bookmark": true,
        "memo": "親譲おやゆずりの無鉄砲むてっぽうで小供の時から損ばかりしている。小学校に居る時分学校の二階から飛び降りて一週間ほど腰こしを抜ぬかした事がある。なぜそんな無闇むやみをしたと聞く人があるかも知れぬ。別段深い理由でもない。新築の二階から首を出していたら、同級生の一人が冗談じょうだんに、いくら威張いばっても、そこから飛び降りる事は出来まい。弱虫やーい。と囃はやしたからである。小使こづかいに負ぶさって帰って来た時、おやじが大きな眼めをして二階ぐらいから飛び降りて腰を抜かす奴やつがあるかと云いったから、この次は抜かさずに飛んで見せますと答えた。"
        },
        {"id": "ID002","title": "鼻","tags": ["literature"],"is_bookmark": false,"memo": "メモ"},
        {"id": "ID003","title": "城の崎にて","tags": ["literature"],"is_bookmark": true,"memo": "メモ"},
        {"id": "ID004","title": "蟹工船","tags": ["literature"],"is_bookmark": false,"memo": "メモ"},
        {"id": "ID005","title": "雪国","tags": ["literature"],"is_bookmark": true,"memo": "メモ"}
    ]
</script>

<!-- <script type="text/javascript" src="edit.js"></script> -->
<script type="text/javascript">
    function getID() {
        const value = window.location.href.match(new RegExp("[?&]id=(.*?)(&|$|#)"));
        if (value == null) return '';
        return decodeURIComponent(value[1]);
    }
    function searchShowData(id){
        for(var i=0; i<data.length; i++){
            if(data[i].id == id) return data[i];
        }
    }
    function goIndividualPage(){
        window.location.href = "./individual.html?id="+getID();
    }
    function editRequest(){
        newData = {
            "id": getID(),
            "title": document.getElementById("title").value,
            "tags": document.getElementById("tags").value.split(','),
            "is_bookmark": bookmark,
            "memo": document.getElementById("memo").value
        };
        alert(newData.id);
        alert(newData.title);
        alert(newData.tags);
        alert(newData.is_bookmark);
        alert(newData.memo);
    }
    function showStar(){
        var star = document.getElementById("star");
        if(bookmark){
            star.innerHTML = "<i class=\"star icon\" onclick=\"reverseBookmark();\"></i>"
        } else {
            star.innerHTML = "<i class=\"star outline icon\" onclick=\"reverseBookmark();\"></i>"
        }

    }
    function reverseBookmark(){
        bookmark = !bookmark;
        showStar();
    }

    var bookmark;
    window.onload = function(){
        // alert(getID());
        showData = searchShowData(getID());
        // alert(showData.tags);
        bookmark = showData.is_bookmark;
        document.getElementById("title").innerHTML = showData.title;
        document.getElementById("tags").innerHTML = showData.tags;
        document.getElementById("memo").innerHTML = showData.memo;
        showStar();
    };
</script>

<body>
    <header>
        <img src="./images/logo.png" alt="logo" id="logo">
    </header>
    <h1>書籍情報　<div id="star"></div></h1>
    <form class="ui form">
        <table id="bookInfo" class="ui basic table">
            <tbody id='tableBody'>
                <tr>
                    <td class="bookEditIndex">タイトル</td>
                    <td><textarea id="title" placeholder="Title..." rows="1"></textarea></div>
                </tr>
                <tr>
                    <td class="bookEditIndex">分類</td>
                    <td><textarea id="tags" placeholder="Tags..." rows="1"></textarea></td>
                </tr>
                <tr>
                    <td class="bookEditIndex">メモ</td>
                    <td><textarea id="memo" placeholder="Memo..." rows="10"></textarea></td>
                </tr>
            </tbody>
        </table>
    </form>
    <div id="selectCancelSave">
        <button class="circular ui button" id="cancelButton" onclick="goIndividualPage();">キャンセルする</button>
        <button class="circular ui button" id="saveButton" onclick="editRequest();">保存する</button>
    </div>

</body>
</html>